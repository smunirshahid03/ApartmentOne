@extends('Dashboard.Layouts.master_dashboard')
@section('content')
    <div class="income-reports-sec-page">
        <div class="row">
            <div class="col-md-12">
                <div class="income-reports-two-boxes">
                    <div class="parent-box gray-box">
                        <h6>This Month</h6>
                        <h5>$1500k</h5>
                        <p>January 2024</p>
                    </div>
                    <div class="parent-box blue-box">
                        <h6>This Month</h6>
                        <h5>$1500k</h5>
                        <p>January 2024</p>
                    </div>
                </div>

                <div class="two-things-align">
                    <div class="box">
                        <h6>Detailed Reports</h6>
                    </div>
                    <div class="box">
                        <a href="#" class="t-btn t-btn-blue t-btn-svg">Download CSV 
                            <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.7374 11.575C19.2822 7.98956 16.2114 5.20831 12.5041 5.20831C9.63324 5.20831 7.13949 6.88644 6.00094 9.53123C3.76344 10.2 2.0874 12.3125 2.0874 14.5833C2.0874 17.4552 4.42386 19.7916 7.29574 19.7916H8.3374V17.7083H7.29574C5.57282 17.7083 4.17074 16.3062 4.17074 14.5833C4.17074 13.1208 5.41969 11.7114 6.95511 11.4416L7.56032 11.3354L7.76032 10.7541C8.49261 8.61769 10.3103 7.29165 12.5041 7.29165C15.3759 7.29165 17.7124 9.6281 17.7124 12.5V13.5416H18.7541C19.903 13.5416 20.8374 14.476 20.8374 15.625C20.8374 16.7739 19.903 17.7083 18.7541 17.7083H16.6707V19.7916H18.7541C21.052 19.7916 22.9207 17.9229 22.9207 15.625C22.9195 14.6911 22.6052 13.7847 22.0282 13.0505C21.4511 12.3163 20.6445 11.7968 19.7374 11.575Z" fill="white"></path>
                                <path d="M13.5457 14.5834V10.4167H11.4624V14.5834H8.3374L12.5041 19.7917L16.6707 14.5834H13.5457Z" fill="white"></path>
                                </svg>

                        </a>
                    </div>
                </div>

                <div class="reports-table">
                    <table>
                        <tr>
                            <th>User</th>
                            <th>Join On</th>
                            <th>Role</th>
                            <th>Income</th>
                            <th>For</th>
                            <th>Total Amount</th>
                            <th>Actions</th>
                        </tr>
                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>
                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>

                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>
                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>

                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>
                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>
                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>
                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>
                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>

                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>
                        <tr>
                            <td>Robert Strom</td>
                            <td>January 2024</td>
                            <td>Tenant</td>
                            <td class="price"> <p>$200</p> </td>
                            <td>Credit Report   </td>
                            <td>$1200</td>
                            <td><a href="#">Delete</a></td>
                        </tr>
                    </table>
                </div>

            </div>
        </div>
    </div>


    <!-- Load jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $('.js-example-basic-multiple').select2();
        });

        $(".js-example-basic-multiple").select2({
            placeholder: "Select a state",
            allowClear: true
        });
        $(".js-example-placeholder-multiple").select2({
            placeholder: "Select a state"
        });
    </script>



    <script>
        const progressInput = document.getElementById('progressInput');
        const progressNumber = document.getElementById('progressNumber');

        // Individual input boxes
        const numberInput1 = document.getElementById('numberInput1');
        const numberInput2 = document.getElementById('numberInput2');
        const numberInput3 = document.getElementById('numberInput3');
        const numberInput4 = document.getElementById('numberInput4');
        const numberInput5 = document.getElementById('numberInput5');

        // Listen to slider changes and update corresponding number inputs
        progressInput.addEventListener('input', function() {
            const progress = parseInt(progressInput.value);
            updateProgress(progress);
            changeBarColor(progressInput.value);
            changeInputColors(progress); // Change input box colors
        });

        // Listen to number input changes to update progress bar
        numberInput1.addEventListener('input', function() {
            const value = parseInt(this.value);
            if (value >= 10 && value < 500) {
                progressInput.value = value;
                updateProgress(value);
            }
        });

        numberInput2.addEventListener('input', function() {
            const value = parseInt(this.value);
            if (value >= 500 && value < 1000) {
                progressInput.value = value;
                updateProgress(value);
            }
        });

        numberInput3.addEventListener('input', function() {
            const value = parseInt(this.value);
            if (value >= 1000 && value < 1500) {
                progressInput.value = value;
                updateProgress(value);
            }
        });

        numberInput4.addEventListener('input', function() {
            const value = parseInt(this.value);
            if (value >= 1500 && value < 2000) {
                progressInput.value = value;
                updateProgress(value);
            }
        });

        numberInput5.addEventListener('input', function() {
            const value = parseInt(this.value);
            if (value >= 2000) {
                progressInput.value = value;
                updateProgress(value);
            }
        });

        // Function to update the progress and which number input is active
        function updateProgress(value) {
            progressNumber.innerText = value;

            // Update number inputs based on the current progress value
            if (value >= 10 && value < 500) {
                numberInput1.value = value;
            } else if (value >= 500 && value < 1000) {
                numberInput2.value = value;
            } else if (value >= 1000 && value < 1500) {
                numberInput3.value = value;
            } else if (value >= 1500 && value < 2000) {
                numberInput4.value = value;
            } else if (value >= 2000) {
                numberInput5.value = value;
            }
        }

        // Change the color of the progress bar based on the value
        function changeBarColor(value) {
            const maxValue = parseInt(progressInput.max);
            const percentage = (value / maxValue) * 100;

            // Set a color based on the percentage
            if (percentage <= 50) {
                progressInput.style.background = `linear-gradient(90deg, #0077B6 ${percentage}%, #f3f3f3 ${percentage}%)`;
            } else {
                progressInput.style.background = `linear-gradient(90deg, #0077B6 ${percentage}%, #f3f3f3 ${percentage}%)`;
            }
        }

        // Change the background color of the input box corresponding to the progress value
        function changeInputColors(value) {
            // Reset background color of all input boxes
            resetInputs();

            // Change color based on the progress value
            if (value >= 10 && value < 500) {
                numberInput1.style.backgroundColor = '#0077B6'; // Change color for 10-500 range
            } else if (value >= 500 && value < 1000) {
                numberInput2.style.backgroundColor = '#0077B6'; // Change color for 500-1000 range
            } else if (value >= 1000 && value < 1500) {
                numberInput3.style.backgroundColor = '#0077B6'; // Change color for 1000-1500 range
            } else if (value >= 1500 && value < 2000) {
                numberInput4.style.backgroundColor = '#0077B6'; // Change color for 1500-2000 range
            } else if (value >= 2000) {
                numberInput5.style.backgroundColor = '#0077B6'; // Change color for 2000+ range
            }
        }

        // Reset all number inputs to avoid multiple updates
        function resetInputs() {
            numberInput1.style.backgroundColor = '';
            numberInput2.style.backgroundColor = '';
            numberInput3.style.backgroundColor = '';
            numberInput4.style.backgroundColor = '';
            numberInput5.style.backgroundColor = '';
        }

        // Start progress on click (demo)
        function startProgress() {
            const intervals = [10, 500, 1000, 1500, 2000]; // The progress increments
            let index = 0;

            const progressInterval = setInterval(() => {
                if (index < intervals.length) {
                    const progress = intervals[index];
                    progressInput.value = progress;
                    updateProgress(progress);
                    changeBarColor(progress);
                    changeInputColors(progress); // Update input box colors
                    index++;
                } else {
                    clearInterval(progressInterval); // Stop when all increments are done
                }
            }, 1000); // Update every second
        }
    </script>

    <script>
        const fileInput = document.getElementById('fileInput');
        const imageContainer = document.getElementById('imageContainer');
        let selectedImages = [];

        fileInput.addEventListener('change', (event) => {
            const files = Array.from(event.target.files);

            if (selectedImages.length + files.length > 50) {
                alert("You can only upload a maximum of 50 images.");
                return;
            }

            files.forEach(file => {
                if (file.type.startsWith('image/')) {
                    if (selectedImages.length < 50) {
                        selectedImages.push(file);
                        displayImage(file);
                    }
                } else {
                    alert("Only image files are allowed.");
                }
            });

            checkImageCount();
        });

        function displayImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const imagePreview = document.createElement('div');
                imagePreview.classList.add('image-preview');

                const img = document.createElement('img');
                img.src = e.target.result;

                const closeButton = document.createElement('button');
                closeButton.classList.add('close-btn');
                closeButton.innerHTML = 'X';
                closeButton.onclick = function() {
                    imageContainer.removeChild(imagePreview);
                    selectedImages = selectedImages.filter(img => img !== file);
                    checkImageCount();
                };

                imagePreview.appendChild(img);
                imagePreview.appendChild(closeButton);
                imageContainer.appendChild(imagePreview);
            };
            reader.readAsDataURL(file);
        }

        function checkImageCount() {
            if (selectedImages.length < 10) {
                alert('You need to upload at least 10 images.');
            }
        }
    </script>
    <script>
        $(document).ready(function() {
            // Handle form submission inside the modal
            $('#categoryForm').on('submit', function(event) {
                event.preventDefault(); // Prevent the form from submitting normally

                var newCategory = $('#new-category').val();
                if (newCategory) {
                    $.ajax({
                        url: "{{ route('landlord.category.store') }}", // Update to your route
                        method: "POST",
                        data: {
                            _token: "{{ csrf_token() }}",
                            name: newCategory
                        },
                        success: function(response) {
                            if (response.success) {
                                // Add the new category to the select dropdown
                                $('#cars').append(
                                    `<option value="${response.category.id}" selected>${response.category.name}</option>`
                                );

                                // Clear the input field and close the modal
                                $('#new-category').val('');
                                $('#categoryModal').modal('hide'); // Hide the modal
                            } else {
                                alert(response.message);
                            }
                        },
                        error: function(error) {
                            alert('Error creating category');
                        }
                    });
                } else {
                    alert('Please enter a category name');
                }
            });
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.0.8/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
@endsection
